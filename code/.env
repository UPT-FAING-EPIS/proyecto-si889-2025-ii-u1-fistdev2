# Archivo principal de variables de entorno para DevFlow
# Copiar a .env.development, .env.production, etc. según sea necesario

# ==============================================
# CONFIGURACIÓN GENERAL
# ==============================================

# Ambiente de ejecución (development, production, test)
NODE_ENV=development

# Puerto por defecto para aplicaciones
FRONTEND_PORT=3000
BACKEND_PORT=3001

# URL base de la API
NEXT_PUBLIC_API_URL=http://localhost:3001
API_BASE_URL=http://localhost:3001

# ==============================================
# BASE DE DATOS
# ==============================================

# PostgreSQL
DATABASE_URL=postgresql://devflow_user:devflow_password@localhost:5432/devflow
DB_HOST=localhost
DB_PORT=5432
DB_NAME=devflow
DB_USER=devflow_user
DB_PASSWORD=devflow_password

# Configuración de conexiones
DB_CONNECTION_LIMIT=20
DB_CONNECTION_TIMEOUT=60000

# ==============================================
# CACHE Y SESIONES
# ==============================================

# Redis
REDIS_URL=redis://:redis_password@localhost:6379
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=redis_password
REDIS_DB=0

# TTL para cache (en segundos)
CACHE_TTL=3600
SESSION_TTL=86400

# ==============================================
# AUTENTICACIÓN Y SEGURIDAD
# ==============================================

# JWT Configuration
JWT_SECRET=53d5772ac231361ea94ebf70077fd556a5b33c1117832a6c14d5afe8ef4ee569a559f0ef20ef836dae8bc30b029f162d4e9018574394aa1d2786edcebb686624
JWT_EXPIRES_IN=1h
JWT_REFRESH_EXPIRES_IN=7d

# Bcrypt salt rounds (más alto = más seguro pero más lento)
BCRYPT_SALT_ROUNDS=12

# CORS Configuration
CORS_ORIGIN=http://localhost:3000
CORS_CREDENTIALS=true

# Rate Limiting
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100

# ==============================================
# LOGGING
# ==============================================

# Nivel de logging (error, warn, info, debug)
LOG_LEVEL=info

# Directorio de logs
LOG_DIR=./logs

# Rotación de logs
LOG_MAX_SIZE=20m
LOG_MAX_FILES=14d

# ==============================================
# NOTIFICACIONES
# ==============================================

# Email (SMTP)
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=alerts@devflow.com
SMTP_PASSWORD=your-email-password
SMTP_FROM=DevFlow <noreply@devflow.com>

# Slack Webhooks
SLACK_WEBHOOK_URL=https://hooks.slack.com/services/YOUR/SLACK/WEBHOOK

# ==============================================
# SERVICIOS EXTERNOS
# ==============================================

# Monitoring
PROMETHEUS_URL=http://localhost:9090
GRAFANA_URL=http://localhost:3003

# SonarQube
SONAR_HOST_URL=http://localhost:9000
SONAR_TOKEN=your-sonar-token

# ==============================================
# DESARROLLO
# ==============================================

# Debug
DEBUG=devflow:*
DEBUG_SQL=false

# Hot reload
CHOKIDAR_USEPOLLING=true

# Source maps
GENERATE_SOURCEMAP=true

# ==============================================
# PRODUCCIÓN
# ==============================================

# Compresión
ENABLE_COMPRESSION=true

# SSL/TLS
SSL_CERT_PATH=/etc/ssl/certs/devflow.crt
SSL_KEY_PATH=/etc/ssl/private/devflow.key

# Seguridad adicional
HELMET_ENABLED=true
TRUST_PROXY=true

# ==============================================
# DOCKER
# ==============================================

# Docker Compose
COMPOSE_PROJECT_NAME=devflow
COMPOSE_FILE=docker-compose.yml

# Volúmenes
POSTGRES_DATA_PATH=./data/postgres
REDIS_DATA_PATH=./data/redis

# ==============================================
# TESTING
# ==============================================

# Base de datos de test
TEST_DATABASE_URL=postgresql://devflow_user:devflow_password@localhost:5432/devflow_test

# API Testing
POSTMAN_COLLECTION_PATH=./tests/postman/coleccion.json
NEWMAN_ITERATIONS=1

# Coverage
COVERAGE_THRESHOLD=80

# ==============================================
# CI/CD
# ==============================================

# Build
BUILD_OUTPUT_DIR=./dist
BUILD_ASSETS_DIR=./public

# Deploy
DEPLOY_ENVIRONMENT=development
DEPLOY_BRANCH=main

# Health checks
HEALTH_CHECK_URL=http://localhost:3001/auth/health
HEALTH_CHECK_TIMEOUT=30

# ==============================================
# MÉTRICAS Y MONITOREO
# ==============================================

# Application metrics
METRICS_ENABLED=true
METRICS_PORT=9464

# APM
APM_SERVICE_NAME=devflow
APM_ENVIRONMENT=development

# Alerting
ALERT_EMAIL_RECIPIENTS=admin@devflow.com,ops@devflow.com
PAGERDUTY_INTEGRATION_KEY=your-pagerduty-key

# ==============================================
# CONFIGURACIÓN DE CARACTERÍSTICAS
# ==============================================

# Feature flags
FEATURE_USER_REGISTRATION=true
FEATURE_PROJECT_SHARING=true
FEATURE_ADVANCED_ANALYTICS=false

# Límites
MAX_PROJECTS_PER_USER=10
MAX_TASKS_PER_PROJECT=1000
MAX_FILE_UPLOAD_SIZE=10485760

# ==============================================
# CONFIGURACIÓN ESPECÍFICA DE NEXT.JS
# ==============================================

# Información de la aplicación
NEXT_PUBLIC_APP_NAME=DevFlow
NEXT_PUBLIC_APP_VERSION=1.0.0
NEXT_PUBLIC_APP_DESCRIPTION="Sistema integral para desarrollo de aplicaciones"

# Analytics (opcional)
NEXT_PUBLIC_GOOGLE_ANALYTICS=
NEXT_PUBLIC_HOTJAR_ID=

# ==============================================
# CONFIGURACIÓN ESPECÍFICA DE NESTJS
# ==============================================

# Global prefix para APIs
API_GLOBAL_PREFIX=api
API_VERSION=v1

# Swagger/OpenAPI
SWAGGER_ENABLED=true
SWAGGER_PATH=api/docs

# Timeouts
HTTP_TIMEOUT=30000
SHUTDOWN_TIMEOUT=10000
